<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title>Johan Gall</title>

      <!-- CSS -->
      <link rel="stylesheet" href="http:&#x2f;&#x2f;127.0.0.1:1111&#x2f;print.css" media="print">
      <link rel="stylesheet" href="http:&#x2f;&#x2f;127.0.0.1:1111&#x2f;poole.css">
      <link rel="stylesheet" href="http:&#x2f;&#x2f;127.0.0.1:1111&#x2f;hyde.css">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

      

      
      
    </head>

    <body class="theme-base-0e layout-reverse">
        
            <div class="sidebar">
                <div class="container sidebar-sticky">
                    <div class="sidebar-about">
                        
                            <a href="http:&#x2f;&#x2f;127.0.0.1:1111"><h1>Johan Gall</h1></a>
                            
                            <p class="lead">aka jojo, lucyjojo, freakhill, seku</p>
                            
                        
                    </div>

                    <ul class="sidebar-nav">
                        
                        
                        <li class="sidebar-nav-item"><a href="https:&#x2f;&#x2f;www.youtube.com&#x2f;watch?v=NYgq75uIMUk">SFV beginner guide</a></li>
                        
                        <li class="sidebar-nav-item"><a href="https:&#x2f;&#x2f;github.com&#x2f;freakhill&#x2f;jojolisp">Jojolisp&#x27;s github repo</a></li>
                        
                        <li class="sidebar-nav-item"><a href="https:&#x2f;&#x2f;www.twitch.tv&#x2f;lucyjojo">Twitch channel</a></li>
                        
                        <li class="sidebar-nav-item"><a href="http:&#x2f;&#x2f;www.metro.tokyo.jp&#x2f;english&#x2f;guide&#x2f;bosai&#x2f;index.html">Disaster preparedness Tokyo</a></li>
                        
                        
                    </ul>
                </div>
            </div>
        

        <div class="content container">
            
<div class="post">
  <h1 class="post-title">Rust stuff!</h1>
  <span class="post-date">2019-03-17</span>
  <p><a href="https://docs.google.com/presentation/d/1q-c7UAyrUlM-eZyTo1pd8SZ0qwA_wYxmPZVOQkoDmH4/edit#slide=id.p">Rust container cheat sheet</a></p>
<h3 id="microprofile">Microprofile<a class="zola-anchor" href="#microprofile" aria-label="Anchor link for: microprofile">ðŸ”—</a>
</h3>
<p><a href="https://www.reddit.com/r/rust/comments/b1iwnc/microprofile_for_rust/">reddit thread</a></p>
<p>Profiling for rust games! With a chrome interface and all. seems pretty neat!</p>
<h3 id="copyless">Copyless<a class="zola-anchor" href="#copyless" aria-label="Anchor link for: copyless">ðŸ”—</a>
</h3>
<p>Remove some unneccessary allocations by helping generating code LLVM can optimize better</p>
<p><a href="https://github.com/kvark/copyless">github repo</a></p>
<h3 id="itertools">Itertools<a class="zola-anchor" href="#itertools" aria-label="Anchor link for: itertools">ðŸ”—</a>
</h3>
<p>tons of iterators, ie. max/min/kmerge/interleave/multizip in between others</p>
<p><a href="https://docs.rs/itertools/0.8.0/itertools/">github repo</a></p>
<h3 id="contain-rs">Contain-rs<a class="zola-anchor" href="#contain-rs" aria-label="Anchor link for: contain-rs">ðŸ”—</a>
</h3>
<p>container libraries for rust, ie bitset, lru-cache, ordered iterators, bitvec, vec-map etc.</p>
<p><a href="https://github.com/contain-rs">github repo</a></p>
<h3 id="quickcheck">Quickcheck<a class="zola-anchor" href="#quickcheck" aria-label="Anchor link for: quickcheck">ðŸ”—</a>
</h3>
<p>well.. quickcheck</p>
<p><a href="https://github.com/BurntSushi/quickcheck">github repo</a></p>
<h3 id="reqwest">Reqwest<a class="zola-anchor" href="#reqwest" aria-label="Anchor link for: reqwest">ðŸ”—</a>
</h3>
<p>simple http client lib</p>
<p><a href="https://docs.rs/reqwest/0.7.1/reqwest/">github repo</a></p>
<h3 id="crossbeam">Crossbeam<a class="zola-anchor" href="#crossbeam" aria-label="Anchor link for: crossbeam">ðŸ”—</a>
</h3>
<p>set of tools for concurrent programming (atomic, queues, channels, exponential backoff, scoped threads)</p>
<p><a href="https://github.com/crossbeam-rs/crossbeam">github repo</a></p>
<h3 id="bitflags">bitflags<a class="zola-anchor" href="#bitflags" aria-label="Anchor link for: bitflags">ðŸ”—</a>
</h3>
<p>library to manage bitflags much much better in rust</p>
<p><a href="https://github.com/bitflags/bitflags">github repo</a></p>
<h3 id="byteorder">byteorder<a class="zola-anchor" href="#byteorder" aria-label="Anchor link for: byteorder">ðŸ”—</a>
</h3>
<p>library to manage endianness</p>
<p><a href="https://github.com/BurntSushi/byteorder">github repo</a></p>
<h3 id="chrono">chrono<a class="zola-anchor" href="#chrono" aria-label="Anchor link for: chrono">ðŸ”—</a>
</h3>
<p>date and time library</p>
<p><a href="https://github.com/chronotope/chrono">github repo</a></p>
<h3 id="clap">clap<a class="zola-anchor" href="#clap" aria-label="Anchor link for: clap">ðŸ”—</a>
</h3>
<p>parsing command line arguments</p>
<p><a href="https://github.com/clap-rs/clap">github repo</a></p>
<h3 id="encoding-rs">encoding_rs<a class="zola-anchor" href="#encoding-rs" aria-label="Anchor link for: encoding-rs">ðŸ”—</a>
</h3>
<p>manage string encoding, used by firefox gecko</p>
<p><a href="https://github.com/hsivonen/encoding_rs">github repo</a></p>
<h3 id="fnv">fnv<a class="zola-anchor" href="#fnv" aria-label="Anchor link for: fnv">ðŸ”—</a>
</h3>
<p>very fast hash function! (because no protection against some attacks)</p>
<p><a href="https://github.com/servo/rust-fnv">github repo</a></p>
<h3 id="lazy-static">lazy-static<a class="zola-anchor" href="#lazy-static" aria-label="Anchor link for: lazy-static">ðŸ”—</a>
</h3>
<p>laze evaluated statics for rust, we can initialize statics with runtime code!</p>
<p><a href="https://github.com/rust-lang-nursery/lazy-static.rs">github repo</a></p>
<h3 id="memmap">memmap<a class="zola-anchor" href="#memmap" aria-label="Anchor link for: memmap">ðŸ”—</a>
</h3>
<p>cross-platform memory mapped IO</p>
<p><a href="https://github.com/danburkert/memmap-rs">github repo</a></p>
<h3 id="ndarray">ndarray<a class="zola-anchor" href="#ndarray" aria-label="Anchor link for: ndarray">ðŸ”—</a>
</h3>
<p>n-dimensional array library</p>
<p><a href="https://github.com/rust-ndarray/ndarray">github repo</a></p>
<h3 id="num">num<a class="zola-anchor" href="#num" aria-label="Anchor link for: num">ðŸ”—</a>
</h3>
<p>rational numbers, complex numbers, and others</p>
<p><a href="https://github.com/rust-num/num">github repo</a></p>
<h3 id="num-cpus">num_cpus<a class="zola-anchor" href="#num-cpus" aria-label="Anchor link for: num-cpus">ðŸ”—</a>
</h3>
<p>get the number of cpus</p>
<p><a href="https://github.com/seanmonstar/num_cpus">github repo</a></p>
<h3 id="rayon">rayon<a class="zola-anchor" href="#rayon" aria-label="Anchor link for: rayon">ðŸ”—</a>
</h3>
<p>parallel iterators, forkjoin on closures, a powerful concurrent processing model</p>
<p><a href="https://github.com/rayon-rs/rayon">github repo</a></p>
<h3 id="building-fast-interpreters-in-rust">Building fast interpreters in Rust<a class="zola-anchor" href="#building-fast-interpreters-in-rust" aria-label="Anchor link for: building-fast-interpreters-in-rust">ðŸ”—</a>
</h3>
<p><a href="https://www.slideshare.net/RReverser/building-fast-interpreters-in-rust">slideshare</a></p>
<p>raw AST interpretation slower than bytecode slower than JIT/codegen aaaand codegen has a huge constant factor but ends up beating JIT past some point.</p>
<h4 id="raw-interpretation">Raw interpretation<a class="zola-anchor" href="#raw-interpretation" aria-label="Anchor link for: raw-interpretation">ðŸ”—</a>
</h4>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">match</span><span style="color:#c0c5ce;"> e {
  Expr::Literal(lit) =&gt; *lit,
  Expr::Variable(var) =&gt; var.</span><span style="color:#96b5b4;">calc</span><span style="color:#c0c5ce;">(context),
  Expr::Binary { lhs, op, rhs } =&gt; {
    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> lhs = lhs.</span><span style="color:#96b5b4;">calc</span><span style="color:#c0c5ce;">(context);
    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> rhs = rhs.</span><span style="color:#96b5b4;">calc</span><span style="color:#c0c5ce;">(context);
    op.</span><span style="color:#96b5b4;">apply</span><span style="color:#c0c5ce;">(lhs, rhs)
  }
}
</span></pre><h4 id="bytecode">Bytecode<a class="zola-anchor" href="#bytecode" aria-label="Anchor link for: bytecode">ðŸ”—</a>
</h4>
<p>compile:</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">match</span><span style="color:#c0c5ce;"> e {
  Expr::Literal(lit) =&gt; bytecode.</span><span style="color:#96b5b4;">push</span><span style="color:#c0c5ce;">(BytecodeOp::Literal(*lit)),
  Expr::Variable(v) =&gt; bytecode.</span><span style="color:#96b5b4;">push</span><span style="color:#c0c5ce;">(BytecodeOp::Variable(*v)),
  Expr::Binary { lhs, op, rhs } =&gt; {
    lhs.</span><span style="color:#96b5b4;">compile</span><span style="color:#c0c5ce;">(bytecode);
    rhs.</span><span style="color:#96b5b4;">compile</span><span style="color:#c0c5ce;">(bytecode);
    bytecode.</span><span style="color:#96b5b4;">push</span><span style="color:#c0c5ce;">(BytecodeOp::BinOp(*op));
  }
}
</span></pre>
<p>exec:</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">for</span><span style="color:#c0c5ce;"> op in &amp;</span><span style="color:#bf616a;">self</span><span style="color:#c0c5ce;">.ops {
  </span><span style="color:#b48ead;">match</span><span style="color:#c0c5ce;"> op {
    BytecodeOp::Literal(lit) =&gt; stack.</span><span style="color:#96b5b4;">push</span><span style="color:#c0c5ce;">(*lit),
    BytecodeOp::Variable(var) =&gt; stack.</span><span style="color:#96b5b4;">push</span><span style="color:#c0c5ce;">(var.</span><span style="color:#96b5b4;">calc</span><span style="color:#c0c5ce;">(context)),
    BytecodeOp::BinOp(op) =&gt; {
      </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> rhs = stack.</span><span style="color:#96b5b4;">pop</span><span style="color:#c0c5ce;">().</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
      </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> lhs = stack.</span><span style="color:#96b5b4;">pop</span><span style="color:#c0c5ce;">().</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
      stack.</span><span style="color:#96b5b4;">push</span><span style="color:#c0c5ce;">(op.</span><span style="color:#96b5b4;">apply</span><span style="color:#c0c5ce;">(lhs, rhs));
    }
  }
}
</span></pre><h4 id="boxed-closures-much-better-perf-than-ast-bytecode">Boxed closures (much better perf than ast/bytecode)<a class="zola-anchor" href="#boxed-closures-much-better-perf-than-ast-bytecode" aria-label="Anchor link for: boxed-closures-much-better-perf-than-ast-bytecode">ðŸ”—</a>
</h4>
<p>(target is f64 because the example is a calculator...)</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">pub type </span><span style="color:#c0c5ce;">CompiledExpr = Box&lt;dyn Fn(&amp;Context) -&gt; </span><span style="color:#b48ead;">f64</span><span style="color:#c0c5ce;">&gt;
</span></pre><pre style="background-color:#2b303b;">
<span style="color:#b48ead;">match</span><span style="color:#c0c5ce;"> e {
  Expr::Literal(lit) =&gt; Box::new(</span><span style="color:#b48ead;">move </span><span style="color:#c0c5ce;">|_ctx| lit),
  Expr::Variable(var) =&gt; </span><span style="color:#b48ead;">match</span><span style="color:#c0c5ce;"> var {
    Variable::X =&gt; Box::new(</span><span style="color:#b48ead;">move </span><span style="color:#c0c5ce;">|ctx| ctx.x),
    ...
  },
  Expr::Binary { lhs, op, rhs } =&gt; {
    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> lhs = lhs.</span><span style="color:#96b5b4;">compile</span><span style="color:#c0c5ce;">();
    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> rhs = rhs.</span><span style="color:#96b5b4;">compile</span><span style="color:#c0c5ce;">();
    </span><span style="color:#b48ead;">match</span><span style="color:#c0c5ce;"> op {
      BinOp::Add =&gt; Box::new(</span><span style="color:#b48ead;">move </span><span style="color:#c0c5ce;">|ctx| </span><span style="color:#96b5b4;">lhs</span><span style="color:#c0c5ce;">(ctx) + </span><span style="color:#96b5b4;">rhs</span><span style="color:#c0c5ce;">(ctx)),
      ...
    }
  }
}
</span></pre>
<p>Then call the resulting closure.</p>
<p>Why is it faster???</p>
<p>Bytecode goes:</p>
<ul>
<li>fetch op</li>
<li>pop stack pop stack</li>
<li>match BinaryOp, op.apply (vtable) on 2 params</li>
<li>stack push</li>
</ul>
<p>Boxed closures go:</p>
<ul>
<li>indirect call into indirect call (no vtable)</li>
</ul>
<p>no data stack, just the c stack</p>
<p>matters that much?</p>
<p>think about it later on...</p>
<h4 id="llvm-from-rust">LLVM from Rust<a class="zola-anchor" href="#llvm-from-rust" aria-label="Anchor link for: llvm-from-rust">ðŸ”—</a>
</h4>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> context = Context::create();
</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> f64type = context.</span><span style="color:#96b5b4;">f64_type</span><span style="color:#c0c5ce;">();
</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> builder = context.</span><span style="color:#96b5b4;">create_builder</span><span style="color:#c0c5ce;">();

</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> module = context.</span><span style="color:#96b5b4;">create_module</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">module</span><span style="color:#c0c5ce;">&quot;);
</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> func = module.</span><span style="color:#96b5b4;">add_function</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">jit_compiled</span><span style="color:#c0c5ce;">&quot;,
    f64type.</span><span style="color:#96b5b4;">fn_type</span><span style="color:#c0c5ce;">(&amp;[f64type.</span><span style="color:#96b5b4;">into</span><span style="color:#c0c5ce;">(), f64type.</span><span style="color:#96b5b4;">into</span><span style="color:#c0c5ce;">()], </span><span style="color:#d08770;">false</span><span style="color:#c0c5ce;">),
    None,);
    
</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> block = func.</span><span style="color:#96b5b4;">append_basic_block</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">entry</span><span style="color:#c0c5ce;">&quot;);
builder.</span><span style="color:#96b5b4;">position_at_end</span><span style="color:#c0c5ce;">(&amp;block);

</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> result = ...;

builder.</span><span style="color:#96b5b4;">build_return</span><span style="color:#c0c5ce;">(Some(&amp;result));

</span><span style="color:#b48ead;">match</span><span style="color:#c0c5ce;"> e {
  Expr::Literal(lit) =&gt; f64type.</span><span style="color:#96b5b4;">const_float</span><span style="color:#c0c5ce;">(*lit),
  Expr::Variable(var) =&gt; func.</span><span style="color:#96b5b4;">get_nth_param</span><span style="color:#c0c5ce;">(...).</span><span style="color:#96b5b4;">into_float_value</span><span style="color:#c0c5ce;">(),
  Expr::Binary { lhs, op, rhs } =&gt; {
    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> lhs = lhs.</span><span style="color:#96b5b4;">compile</span><span style="color:#c0c5ce;">(...);
    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> rhs = rhs.</span><span style="color:#96b5b4;">compile</span><span style="color:#c0c5ce;">(...);
    </span><span style="color:#b48ead;">match</span><span style="color:#c0c5ce;"> op {
      BinOp::Add =&gt; builder.</span><span style="color:#96b5b4;">build_float_add</span><span style="color:#c0c5ce;">(lhs, rhs, &quot;</span><span style="color:#a3be8c;">add</span><span style="color:#c0c5ce;">&quot;),
      ...
    }
  }
}

</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> engine = module.</span><span style="color:#96b5b4;">create_jit_execution_engine</span><span style="color:#c0c5ce;">(OptimizationLevel::None)?;
</span><span style="color:#b48ead;">unsafe </span><span style="color:#c0c5ce;">{ engine.</span><span style="color:#96b5b4;">get_function</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">jit_compiled</span><span style="color:#c0c5ce;">&quot;)? }
</span></pre><h4 id="cranelift">Cranelift<a class="zola-anchor" href="#cranelift" aria-label="Anchor link for: cranelift">ðŸ”—</a>
</h4>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> builder = SimpleJITBuilder::new();
</span><span style="color:#b48ead;">let mut</span><span style="color:#c0c5ce;"> module: Module&lt;SimpleJITBackend&gt; = Module::new(builder);
</span><span style="color:#b48ead;">let mut</span><span style="color:#c0c5ce;"> ctx = module.</span><span style="color:#96b5b4;">make_context</span><span style="color:#c0c5ce;">();
</span><span style="color:#b48ead;">let mut</span><span style="color:#c0c5ce;"> func_builder_ctx = FunctionBuilderContext::new();

</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> sig = &amp;</span><span style="color:#b48ead;">mut</span><span style="color:#c0c5ce;"> ctx.func.signature;
sid.params.</span><span style="color:#96b5b4;">push</span><span style="color:#c0c5ce;">(AbiParam::new(types::</span><span style="color:#d08770;">F64</span><span style="color:#c0c5ce;">)); </span><span style="color:#65737e;">// X
</span><span style="color:#c0c5ce;">sig.params.</span><span style="color:#96b5b4;">push</span><span style="color:#c0c5ce;">(AbiParam::new(types::</span><span style="color:#d08770;">F64</span><span style="color:#c0c5ce;">)); </span><span style="color:#65737e;">// Y
</span><span style="color:#c0c5ce;">sig.returns.</span><span style="color:#96b5b4;">push</span><span style="color:#c0c5ce;">(AbiParam::new(types::</span><span style="color:#d08770;">F64</span><span style="color:#c0c5ce;">));

</span><span style="color:#b48ead;">let mut</span><span style="color:#c0c5ce;"> builder = FunctionBuilder::new(
  &amp;</span><span style="color:#b48ead;">mut</span><span style="color:#c0c5ce;"> ctx.func, &amp;</span><span style="color:#b48ead;">mut</span><span style="color:#c0c5ce;"> func_builder_ctx);

</span><span style="color:#65737e;">// ebb = Extended Basic Block
// In compiler construction, a basic block is a straight-line code sequence with no branches in except to the entry and no branches out except at the exit.
// An extended basic block is a maximal collection of basic blocks where:
// - only the first basic block can have multiple predecessor basic blocks;
// - all the other basic blocks have one single predecessor basic block, which must be within the collection of basic blocks.
</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> entry_ebb = builder.</span><span style="color:#96b5b4;">create_ebb</span><span style="color:#c0c5ce;">();
builder.</span><span style="color:#96b5b4;">append_ebb_params_for_function_params</span><span style="color:#c0c5ce;">(entry_ebb);
builder.</span><span style="color:#96b5b4;">switch_to_block</span><span style="color:#c0c5ce;">(entry_ebb);
builder.</span><span style="color:#96b5b4;">seal_block</span><span style="color:#c0c5ce;">(entry_ebb);

</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> result = ...;

</span><span style="color:#65737e;">// ins =&gt; instructions
</span><span style="color:#c0c5ce;">builder.</span><span style="color:#96b5b4;">ins</span><span style="color:#c0c5ce;">().</span><span style="color:#96b5b4;">return_</span><span style="color:#c0c5ce;">(&amp;[result]);
builder.</span><span style="color:#96b5b4;">finalize</span><span style="color:#c0c5ce;">();

</span><span style="color:#b48ead;">match</span><span style="color:#c0c5ce;"> e {
  Expr::Literal(lit) =&gt; {
    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> ins = builder.</span><span style="color:#96b5b4;">ins</span><span style="color:#c0c5ce;">();
    ins.</span><span style="color:#96b5b4;">f64const</span><span style="color:#c0c5ce;">(Ieee64::with_float(*lit))
  },
  Expr::Variable(var) =&gt; builder.</span><span style="color:#96b5b4;">ebb_params</span><span style="color:#c0c5ce;">(ebb)[ ... ],
  Expr::Binary { lhs, op, rhs } =&gt; {
    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> lhs = lhs.</span><span style="color:#96b5b4;">compile</span><span style="color:#c0c5ce;">( ... );
    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> rhs = rhs.</span><span style="color:#96b5b4;">compile</span><span style="color:#c0c5ce;">( ... );
    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> ins = builder.</span><span style="color:#96b5b4;">ins</span><span style="color:#c0c5ce;">();
    </span><span style="color:#b48ead;">match</span><span style="color:#c0c5ce;"> op {
      BinOp::Add =&gt; ins.</span><span style="color:#96b5b4;">fadd</span><span style="color:#c0c5ce;">(lhs, rhs),
      ...
    }
  }
}

</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> id = module.</span><span style="color:#96b5b4;">declare_function</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">jit_compiled</span><span style="color:#c0c5ce;">&quot;,
    Linkage::Local,
    &amp;ctx.func.signature);
module.</span><span style="color:#96b5b4;">define_function</span><span style="color:#c0c5ce;">(id, &amp;</span><span style="color:#b48ead;">mut</span><span style="color:#c0c5ce;"> ctx)?;
module.</span><span style="color:#96b5b4;">clear_context</span><span style="color:#c0c5ce;">(&amp;</span><span style="color:#b48ead;">mut</span><span style="color:#c0c5ce;"> ctx);
module.</span><span style="color:#96b5b4;">finalize_definitions</span><span style="color:#c0c5ce;">();
Ok(</span><span style="color:#b48ead;">unsafe </span><span style="color:#c0c5ce;">{ ::std::mem::transmute(module.</span><span style="color:#96b5b4;">get_finalized_function</span><span style="color:#c0c5ce;">(id)) })
</span><span style="color:#65737e;">// type FinalizedFunction = *const u8 -&gt; code and data in memory
// type FinalizedData = (*mut u8, usize) -&gt; complete output artifact for a data object
</span></pre><h3 id="spongedown-markdown-to-html-with-asciiart-to-svg-support">Spongedown - markdown to html with asciiart to svg support<a class="zola-anchor" href="#spongedown-markdown-to-html-with-asciiart-to-svg-support" aria-label="Anchor link for: spongedown-markdown-to-html-with-asciiart-to-svg-support">ðŸ”—</a>
</h3>
<p><a href="https://github.com/ivanceras/spongedown">Github repo</a></p>
<h3 id="flamer-flame-graphs-for-rust">Flamer - flame graphs for rust<a class="zola-anchor" href="#flamer-flame-graphs-for-rust" aria-label="Anchor link for: flamer-flame-graphs-for-rust">ðŸ”—</a>
</h3>
<p><a href="https://github.com/llogiq/flamer">Github repo</a></p>
<h3 id="cargo-flamegraph-other-flame-graphs-for-rust">Cargo-flamegraph - Other flame graphs for rust!<a class="zola-anchor" href="#cargo-flamegraph-other-flame-graphs-for-rust" aria-label="Anchor link for: cargo-flamegraph-other-flame-graphs-for-rust">ðŸ”—</a>
</h3>
<p><a href="https://github.com/ferrous-systems/flamegraph">Github repo</a></p>
<h3 id="read">READ!<a class="zola-anchor" href="#read" aria-label="Anchor link for: read">ðŸ”—</a>
</h3>
<ul>
<li><a href="https://rust-unofficial.github.io/too-many-lists/">Learn Rust with entirely too many lists</a></li>
<li><a href="https://danielkeep.github.io/tlborm/book/index.html">The little book of rust macros</a></li>
</ul>
<p>https://rust-unofficial.github.io/too-many-lists/</p>

</div>

        </div>

    <script src="/livereload.js?port=1024&mindelay=10"></script></body>

</html>
