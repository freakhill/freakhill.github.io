<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title>Johan Gall</title>

      <!-- CSS -->
      <link rel="stylesheet" href="http:&#x2f;&#x2f;127.0.0.1:1111&#x2f;print.css" media="print">
      <link rel="stylesheet" href="http:&#x2f;&#x2f;127.0.0.1:1111&#x2f;poole.css">
      <link rel="stylesheet" href="http:&#x2f;&#x2f;127.0.0.1:1111&#x2f;hyde.css">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

      

      
      
    </head>

    <body class="theme-base-0e layout-reverse">
        
            <div class="sidebar">
                <div class="container sidebar-sticky">
                    <div class="sidebar-about">
                        
                            <a href="http:&#x2f;&#x2f;127.0.0.1:1111"><h1>Johan Gall</h1></a>
                            
                            <p class="lead">aka jojo, lucyjojo, freakhill, seku</p>
                            
                        
                    </div>

                    <ul class="sidebar-nav">
                        
                        
                        <li class="sidebar-nav-item"><a href="https:&#x2f;&#x2f;www.youtube.com&#x2f;watch?v=NYgq75uIMUk">SFV beginner guide</a></li>
                        
                        <li class="sidebar-nav-item"><a href="https:&#x2f;&#x2f;github.com&#x2f;freakhill&#x2f;jojolisp">Jojolisp&#x27;s github repo</a></li>
                        
                        <li class="sidebar-nav-item"><a href="https:&#x2f;&#x2f;www.twitch.tv&#x2f;lucyjojo">Twitch channel</a></li>
                        
                        <li class="sidebar-nav-item"><a href="http:&#x2f;&#x2f;www.metro.tokyo.jp&#x2f;english&#x2f;guide&#x2f;bosai&#x2f;index.html">Disaster preparedness Tokyo</a></li>
                        
                        
                    </ul>
                </div>
            </div>
        

        <div class="content container">
            
<div class="post">
  <h1 class="post-title">I&#x27;m building a Lisp on the side</h1>
  <span class="post-date">2019-03-17</span>
  <p>I want to make a lisp to develop games on PC and consoles.</p>
<p>Use F-Expr and pervasive full program optimization, partial interpreter &amp; LLVM code generation.</p>
<p>First order locality, packing, static &amp; dynamic environments.</p>
<p>No GC, support for rust Pin/Unpin (build up support of gc as a library)</p>
<p>Concepts:</p>
<ul>
<li>Locality</li>
<li>Packing = Tilling * Alignment * Size of each field</li>
<li>Modules</li>
<li>Each symbol has an API and a version, and a locality</li>
<li>do not export libraries/packages, but functions and static bundles each with api/version/and dependencies</li>
</ul>
<p>Think about:</p>
<ul>
<li>How to do polymorphism?? in our multi-stage compiling system</li>
</ul>
<p>We want flow typing
We want to be able to bind to C libraries fast, so we can call LLVM/Z3 from inside
our language.</p>
<p>// There are no macros in jojolist, only applicative and operatives
// [1 2 3] â‰¡ (array 1 2 3)
// &quot;abc&quot; â‰¡ (packing --stuff--for-unicode-packing-- (array 65 66 67??))
// {.offset_member 1 @ptr_member 12 &gt;&quot;dict member&quot; 77} â‰¡ (packing ~~~ (record ...))
// tilling [0 (n [1]) (n [2]) (n [3 4 5]) 6 7 (m [8])]
// align ...
// sizes ...
// packing tilling x align x size</p>
<h2 id="stuff-to-check-out">Stuff to check out<a class="zola-anchor" href="#stuff-to-check-out" aria-label="Anchor link for: stuff-to-check-out">ðŸ”—</a>
</h2>
<ul>
<li><a href="https://github.com/mrakgr/The-Spiral-Language">Spiral language</a></li>
<li><a href="http://127.0.0.1:1111/jojolisp/">Vau</a></li>
<li><a href="http://127.0.0.1:1111/jojolisp/">ATS</a></li>
<li><a href="http://127.0.0.1:1111/jojolisp/">Learn ADA/Spark</a></li>
<li>look for the source for rust's lifetime checker</li>
<li><a href="https://www.microsoft.com/en-us/research/wp-content/uploads/1992/01/student.pdf">implementing functional languages</a></li>
<li><a href="https://www.microsoft.com/en-us/research/wp-content/uploads/1992/04/spineless-tagless-gmachine.pdf">spineless tagless machine</a></li>
<li><a href="https://wiki.clean.cs.ru.nl/Functional_Programming_and_Parallel_Graph_Rewriting">functional programming and parallel graph rewriting</a></li>
<li><a href="https://llvm.org/docs/LangRef.html">llvm reference manual</a></li>
<li><a href="http://llvm.org/docs/">llvm docs</a></li>
<li><a href="https://queue.acm.org/detail.cfm?id=2991130">great article about locks!</a></li>
</ul>
<h2 id="an-argument-againat-resumable-exceptions">An argument againat resumable exceptions<a class="zola-anchor" href="#an-argument-againat-resumable-exceptions" aria-label="Anchor link for: an-argument-againat-resumable-exceptions">ðŸ”—</a>
</h2>
<p><a href="https://books.google.co.jp/books?id=hS9mDwAAQBAJ&amp;lpg=PT459&amp;ots=xNle_k81Rl&amp;dq=bjarne%20stroustrup%20against%20resumable%20exceptoni&amp;pg=PT459#v=onepage&amp;q=bjarne%20stroustrup%20against%20resumable%20exceptoni&amp;f=false">From Bjarne Stroupstrup - Design and evolution of C++</a></p>
<h2 id="halide">Halide<a class="zola-anchor" href="#halide" aria-label="Anchor link for: halide">ðŸ”—</a>
</h2>
<p>In Jojolisp we already have the idea of separating a data structure definition (fields, open or close etc.) from its implementation (packing, order etc.).</p>
<p>Halide pushes further by separating an algorithm definition (a + b * c) from its implementation (vertorization, parallelisation etc.)!</p>
<p>This separations allows to experiment with different implementation strategies a lot faster (and is one nice step in implementing some degree of automatic high level optimization.</p>
<p>Halide works on matrix/array operations.</p>
<h3 id="notes-from-halide-talks">Notes from Halide talks<a class="zola-anchor" href="#notes-from-halide-talks" aria-label="Anchor link for: notes-from-halide-talks">ðŸ”—</a>
</h3>
<p>(Re)organizing computation is hard:</p>
<ul>
<li>Optimizing parallelism/locality requires transforming program &amp; data structure</li>
<li>What transformations are legal?</li>
<li>What transformations are beneficial?</li>
</ul>
<p>Halideâ€™s answer: decouple algorithm from schedule</p>
<p>Algorithm: what is computed</p>
<p>Schedule: where and when itâ€™s computed</p>
<p>Easy for programmers to build pipelines</p>
<p>Easy to specify &amp; explore optimizations manual or automatic search</p>
<p>Easy for the compiler to generate fast code</p>
<p>How can we determine good schedules?</p>
<p>Explicit programmer control: </p>
<ul>
<li>The compiler does exactly what you say</li>
<li>Schedules cannot influence correctness</li>
<li>Exploration is fast and easy</li>
</ul>
<p>Stochastic search (autotuning):</p>
<ul>
<li>Pick your favorite high-dimensional search.(We used Petabricksâ€™ genetic algorithm tuner [Ansel et al. 2009])</li>
</ul>
<p>\ /// </p>
<p>BIG POINT : LOOPS ARE IMPLICIT IN HALIDE</p>
<h2 id="ada-spark">ADA/SPARK<a class="zola-anchor" href="#ada-spark" aria-label="Anchor link for: ada-spark">ðŸ”—</a>
</h2>
<p>...</p>
<h3 id="spiral">Spiral<a class="zola-anchor" href="#spiral" aria-label="Anchor link for: spiral">ðŸ”—</a>
</h3>
<p>...</p>
<h3 id="vau-klisp-kernel">Vau/KLisp/Kernel<a class="zola-anchor" href="#vau-klisp-kernel" aria-label="Anchor link for: vau-klisp-kernel">ðŸ”—</a>
</h3>
<p>...</p>

</div>

        </div>

    <script src="/livereload.js?port=1024&mindelay=10"></script></body>

</html>
